################################################################################
# üîë KONFIGURACJA SSH DLA OVH - KROK PO KROKU
# Email: gajewa2014@gmail.com
# Serwer: ubuntu@51.83.131.142
################################################################################

=== KROK 1: WYGENERUJ KLUCZ SSH (Windows PowerShell) ===

# Utw√≥rz folder .ssh je≈õli nie istnieje
mkdir C:\Users\48501\.ssh -ErrorAction SilentlyContinue

# Generuj klucz SSH
ssh-keygen -t ed25519 -C "gajewa2014@gmail.com" -f C:\Users\48501\.ssh\id_ed25519_ovh

# Naci≈õnij Enter 3x (bez has≈Ça dla wygody, lub ustaw has≈Ço je≈õli wolisz)


=== KROK 2: WY≈öWIETL KLUCZ PUBLICZNY ===

# Poka≈º klucz publiczny (do wklejenia na serwer)
Get-Content C:\Users\48501\.ssh\id_ed25519_ovh.pub

# SKOPIUJ CA≈ÅY WY≈öWIETLONY TEKST (zaczyna siƒô od "ssh-ed25519...")


=== KROK 3A: DODAJ KLUCZ PRZEZ PANEL OVH (REINSTALACJA) ===

1. Id≈∫ na: https://www.ovh.com/manager/
2. Zaloguj siƒô: gajewa2014@gmail.com
3. Wybierz VPS: vps-a3f42e4f (51.83.131.142)
4. Kliknij: "Reinstall"
5. Wybierz OS: Ubuntu 24.04 LTS (Noble Numbat)
6. W sekcji SSH Keys ‚Üí "Add SSH Key"
7. Nazwa: "mordzix-key"
8. Wklej klucz publiczny (z kroku 2)
9. Potwierd≈∫ reinstalacjƒô
10. Czekaj 5-10 minut


=== KROK 3B: DODAJ KLUCZ BEZ REINSTALACJI (je≈õli masz dostƒôp) ===

# Je≈õli masz jeszcze dostƒôp SSH z has≈Çem:
ssh ubuntu@51.83.131.142

# Na serwerze wykonaj:
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# Wklej klucz publiczny (ZASTƒÑP tym co skopiowa≈Çe≈õ w kroku 2):
echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAA... gajewa2014@gmail.com" >> ~/.ssh/authorized_keys

chmod 600 ~/.ssh/authorized_keys

# Restart SSH (opcjonalnie):
sudo systemctl restart ssh

exit


=== KROK 4: TESTUJ PO≈ÅƒÑCZENIE ===

# Z Windows PowerShell - po≈ÇƒÖcz siƒô kluczem:
ssh -i C:\Users\48501\.ssh\id_ed25519_ovh ubuntu@51.83.131.142

# Je≈õli dzia≈Ça, zobaczysz:
# ubuntu@vps-a3f42e4f:~$


=== KROK 5: KONFIGURACJA SSH CONFIG (opcjonalnie - dla wygody) ===

# Utw√≥rz plik config:
@"
Host ovh-mordzix
    HostName 51.83.131.142
    User ubuntu
    IdentityFile C:\Users\48501\.ssh\id_ed25519_ovh
    ServerAliveInterval 60
"@ | Out-File -FilePath C:\Users\48501\.ssh\config -Encoding UTF8

# Teraz mo≈ºesz ≈ÇƒÖczyƒá siƒô prostƒÖ komendƒÖ:
ssh ovh-mordzix


=== KROK 6: PRZE≈öLIJ PROJEKT NA SERWER ===

# Utw√≥rz workspace na serwerze:
ssh ovh-mordzix
sudo mkdir -p /workspace/mrd
sudo chown -R ubuntu:ubuntu /workspace
exit

# Prze≈õlij pliki (z Windows):
scp -i C:\Users\48501\.ssh\id_ed25519_ovh -r C:\Users\48501\Desktop\mrd\* ubuntu@51.83.131.142:/workspace/mrd/

# LUB z config (kr√≥cej):
scp -r C:\Users\48501\Desktop\mrd\* ovh-mordzix:/workspace/mrd/


=== KROK 7: URUCHOM APLIKACJƒò ===

ssh ovh-mordzix
cd /workspace/mrd
chmod +x start_production.sh
sudo ./start_production.sh


=== TROUBLESHOOTING ===

Problem: "Permission denied (publickey)"
RozwiƒÖzanie:
1. Sprawd≈∫ uprawnienia klucza: icacls C:\Users\48501\.ssh\id_ed25519_ovh
2. U≈ºyj pe≈Çnej ≈õcie≈ºki: ssh -i C:\Users\48501\.ssh\id_ed25519_ovh ubuntu@51.83.131.142
3. Debug SSH: ssh -vvv -i C:\Users\48501\.ssh\id_ed25519_ovh ubuntu@51.83.131.142

Problem: Klucz nie dzia≈Ça
RozwiƒÖzanie:
1. Reinstall VPS przez panel OVH z kluczem SSH
2. Lub u≈ºyj metody 3B (dodaj klucz manualnie)

Problem: Brak dostƒôpu do serwera
RozwiƒÖzanie:
1. Panel OVH ‚Üí VPS ‚Üí KVM/IPMI (konsola)
2. Zaloguj siƒô jako ubuntu/root
3. Dodaj klucz manualnie (krok 3B)


=== SZYBKIE KOMENDY ===

# Generuj klucz:
ssh-keygen -t ed25519 -C "gajewa2014@gmail.com" -f C:\Users\48501\.ssh\id_ed25519_ovh

# Poka≈º klucz publiczny:
Get-Content C:\Users\48501\.ssh\id_ed25519_ovh.pub

# Po≈ÇƒÖcz siƒô:
ssh -i C:\Users\48501\.ssh\id_ed25519_ovh ubuntu@51.83.131.142

# Prze≈õlij pliki:
scp -i C:\Users\48501\.ssh\id_ed25519_ovh -r C:\Users\48501\Desktop\mrd\* ubuntu@51.83.131.142:/workspace/mrd/


################################################################################
# ‚úÖ GOTOWE!
################################################################################

Po skonfigurowaniu SSH bƒôdziesz m√≥g≈Ç ≈ÇƒÖczyƒá siƒô bez has≈Ça:
ssh ovh-mordzix

Nastƒôpnie uruchom skrypt produkcyjny:
cd /workspace/mrd && sudo ./start_production.sh

Aplikacja bƒôdzie dostƒôpna na:
https://mordxixai.xyz/
